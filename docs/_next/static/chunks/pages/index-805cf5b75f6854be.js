(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9773)}])},9773:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var i=s(5893),a=s(9008),l=s.n(a),n=s(7294);let o=e=>{let{price:t,status:s}=e;return(0,i.jsxs)("div",{className:"flex items-center text-white",children:[(0,i.jsx)("img",{src:"rsrc/ui/icon/crown_32.png",alt:"crown",className:"mr-1 inline-block h-4",width:16,height:16}),Intl.NumberFormat().format(t)," (",s,")"]})},r=e=>{let{count:t}=e;return t<=1?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("div",{className:"relative h-[20px] min-w-[20px] rounded-lg bg-white/90 px-1 text-center text-sm font-medium",children:t})};class c{recolorColor(e){let t=e[0]+this.offsets[0],s=Math.min(Math.max(e[1]+this.offsets[1],0),1),i=Math.min(Math.max(e[2]+this.offsets[2],0),1);return c.HSBtoRGB(t,s,i)}matches(e,t){return!(this.distance(t[0],this.fhsv[0],32767)>32767*this.range[0]||Math.abs(this.hsv[1]-e[1])>this.range[1]||Math.abs(this.hsv[2]-e[2])>this.range[2])}distance(e,t,s){return e>t?Math.min(e-t,t+s-e):Math.min(t-e,e+s-t)}static RGBtoHSB(e,t,s){let i,a;let l=[0,0,0],n=e>t?e:t;s>n&&(n=s);let o=e<t?e:t;s<o&&(o=s);let r=n/255;if(0==(a=0!=n?(n-o)/n:0))i=0;else{let a=(n-e)/(n-o),l=(n-t)/(n-o),r=(n-s)/(n-o);(i=(e==n?r-l:t==n?2+a-r:4+l-a)/6)<0&&(i+=1)}return l[0]=i,l[1]=a,l[2]=r,l}static HSBtoRGB(e,t,s){let i=0,a=0,l=0;if(0==t)i=a=l=255*s+.5;else{let n=(e-Math.floor(e))*6,o=n-Math.floor(n),r=s*(1-t),c=s*(1-t*o),h=s*(1-t*(1-o));switch(0|n){case 0:i=255*s+.5,a=255*h+.5,l=255*r+.5;break;case 1:i=255*c+.5,a=255*s+.5,l=255*r+.5;break;case 2:i=255*r+.5,a=255*s+.5,l=255*h+.5;break;case 3:i=255*r+.5,a=255*c+.5,l=255*s+.5;break;case 4:i=255*h+.5,a=255*r+.5,l=255*s+.5;break;case 5:i=255*s+.5,a=255*r+.5,l=255*c+.5}}return 4278190080|i<<16|a<<8|l<<0}static toFixedHSV(e){let t=[];for(let s in e)t.push(32767*e[s]|0);return t}constructor(e,t,s){this.range=t,this.offsets=s,this.hsv=c.RGBtoHSB(e>>16&255,e>>8&255,255&e),this.fhsv=c.toFixedHSV(this.hsv)}}let h=e=>{let{icon:t,colorizations:s}=e,[a,l]=n.useState("rsrc/".concat(t));return(0,i.jsx)("img",{src:a,alt:t,width:56,height:56,crossOrigin:"anonymous",onLoad:e=>{if(!s||!a.endsWith(".png"))return;let t=new Image;t.src=e.target.src,t.crossOrigin="anonymous",t.onload=()=>{let e=document.createElement("canvas"),i=e.getContext("2d");if(!i)return;console.log(t),e.width=t.width,e.height=t.height,i.drawImage(t,0,0);let a=i.getImageData(0,0,e.width,e.height);console.log(e.width,e.height);let n=a.data,o=[];for(let e in s){let t=s[e];t&&o.push(new c(t.color,t.range,t.offsets))}for(let e=0;e<n.length;e+=4){let t=n[e],s=n[e+1],i=n[e+2],a=c.RGBtoHSB(t,s,i),l=c.toFixedHSV(a);for(let t=0;t<o.length;t++){let s=o[t];if(s&&s.matches(a,l)){let t=s.recolorColor(a);n[e]=t>>16&255,n[e+1]=t>>8&255,n[e+2]=255&t;break}}}i.putImageData(a,0,0),l(e.toDataURL())}}})},d=e=>{let{star:t}=e;return t<=0?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 mt-[1px] flex items-center justify-center font-black",children:t}),(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 text-yellow-500",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"})})]})},x=e=>{let{timeLeftString:t,endDateTimeUnix:s}=e,a=new Date,l=new Date(s),n=Math.floor((l.getTime()-a.getTime())/1e3),o="".concat(Math.floor(n/3600),"h").concat(Math.floor(n%3600/60),"m").replace("0h","");return(0,i.jsxs)("div",{className:"flex items-center text-white",children:[t," (~",o," left)"]})},m=e=>{let{lastDateUpdatedUnix:t}=e,s=new Date,a=new Date(t),l=Math.floor((s.getTime()-a.getTime())/1e3),n="".concat(Math.floor(l/3600),"h").concat(Math.floor(l%3600/60),"m").replace("0h","");return(0,i.jsxs)("div",{className:"text-xs font-light italic text-white",children:[]})},f=()=>{let[e,t]=n.useState([]),[s,a]=n.useState(0),[l,c]=n.useState(20),[f,u]=n.useState(0),[g,w]=n.useState(!1);return n.useEffect(()=>{let i=window.location.protocol.startsWith("https")?"https://api.ball.one":"http://47.99.139.229:10000";0==e.length&&(w(!0),fetch("".concat(i,"/auctions?timeLeft=VERY_SHORT,SHORT,MEDIUM,LONG,VERY_LONG&sort=estimatedEndTime:asc&page=").concat(s,"&size=").concat(l)).then(e=>e.json()).then(e=>{e.list&&(t(e.list),a(e.page),c(e.size),u(e.total))}).finally(()=>w(!1)).catch(e=>console.log(e)))},[e,s,l]),(0,i.jsxs)("div",{className:"h-screen w-screen overflow-y-auto overflow-x-hidden bg-gray-800",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between p-5",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"text-5xl font-bold text-white",children:"Auction House"}),(0,i.jsxs)("div",{className:"text-white",children:[Intl.NumberFormat().format(f)," auctions"]})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("div",{className:"text-lg text-white",children:["Page ",s+1," / ",Math.round(f/l)]}),(0,i.jsxs)("div",{className:"ml-2 mt-2 flex flex-row gap-x-2",children:[(0,i.jsx)("button",{className:"rounded-lg bg-white/20 px-4 py-2 font-bold text-white",onClick:()=>{s>0&&(a(s-1),t([]))},children:"<"}),(0,i.jsx)("button",{className:"rounded-lg bg-white/20 px-4 py-2 font-bold text-white",onClick:()=>{s<Math.floor(f/l)&&(a(s+1),t([]))},children:">"})]})]})]})}),g?(0,i.jsx)("div",{className:"flex h-full flex-row items-center justify-center",children:(0,i.jsx)("div",{className:"h-32 w-32 animate-spin rounded-full border-b-2 border-white"})}):(0,i.jsx)("div",{className:"mx-auto flex max-w-[750px] flex-col gap-y-5 p-5",children:e.map(e=>(0,i.jsxs)("div",{className:"relative flex flex-row overflow-hidden rounded-lg bg-white/10 p-2",children:[(0,i.jsxs)("div",{className:"relative z-10 h-14",children:[(0,i.jsx)(h,{icon:e.item.icon,colorizations:e.item.colorization}),(0,i.jsx)("div",{className:"absolute -bottom-2 -right-2 shadow-xl",children:(0,i.jsx)(r,{count:e.count})}),(0,i.jsx)("div",{className:"absolute -bottom-2 -left-2 shadow-xl",children:(0,i.jsx)(d,{star:e.item.star})})]}),(0,i.jsxs)("div",{className:"z-10 flex flex-col px-4",children:[(0,i.jsx)("div",{className:"font-bold text-white",children:e.item.name}),(0,i.jsx)("div",{className:"font-light italic text-white",children:(0,i.jsx)(x,{timeLeftString:e.timeLeft,endDateTimeUnix:e.estimatedEndTime})}),e.variant&&(0,i.jsx)("div",{className:"text-xs font-bold italic text-yellow-500",children:e.variant.map(t=>(0,i.jsxs)("div",{children:[t.name,": ",t.value]},"".concat(e.id,"-").concat(t.name)))})]}),(0,i.jsxs)("div",{className:"ml-auto flex flex-col items-end",children:[(0,i.jsx)(o,{price:e.bidPrice,status:e.bidStatus}),e.buyPrice>0&&(0,i.jsx)(o,{price:e.buyPrice,status:"Buy Now"})]}),(0,i.jsx)("div",{className:"absolute right-0 bottom-0 px-1 opacity-50",children:(0,i.jsx)(m,{lastDateUpdatedUnix:e.updatedTime})})]},e.id))})]})},u=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:"Auction House"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(f,{})]});var g=u},9008:function(e,t,s){e.exports=s(2636)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);