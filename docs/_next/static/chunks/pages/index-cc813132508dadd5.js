(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1872)}])},1872:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var s=a(5893),l=a(9008),n=a.n(l),r=a(7294);class i{recolorColor(e){let t=e[0]+this.offsets[0],a=Math.min(Math.max(e[1]+this.offsets[1],0),1),s=Math.min(Math.max(e[2]+this.offsets[2],0),1);return i.HSBtoRGB(t,a,s)}matches(e,t){return!(this.distance(t[0],this.fhsv[0],32767)>32767*this.range[0]||Math.abs(this.hsv[1]-e[1])>this.range[1]||Math.abs(this.hsv[2]-e[2])>this.range[2])}distance(e,t,a){return e>t?Math.min(e-t,t+a-e):Math.min(t-e,e+a-t)}static RGBtoHSB(e,t,a){let s,l;let n=[0,0,0],r=e>t?e:t;a>r&&(r=a);let i=e<t?e:t;a<i&&(i=a);let c=r/255;if(0==(l=0!=r?(r-i)/r:0))s=0;else{let l=(r-e)/(r-i),n=(r-t)/(r-i),c=(r-a)/(r-i);(s=(e==r?c-n:t==r?2+l-c:4+n-l)/6)<0&&(s+=1)}return n[0]=s,n[1]=l,n[2]=c,n}static HSBtoRGB(e,t,a){let s=0,l=0,n=0;if(0==t)s=l=n=255*a+.5;else{let r=(e-Math.floor(e))*6,i=r-Math.floor(r),c=a*(1-t),o=a*(1-t*i),u=a*(1-t*(1-i));switch(0|r){case 0:s=255*a+.5,l=255*u+.5,n=255*c+.5;break;case 1:s=255*o+.5,l=255*a+.5,n=255*c+.5;break;case 2:s=255*c+.5,l=255*a+.5,n=255*u+.5;break;case 3:s=255*c+.5,l=255*o+.5,n=255*a+.5;break;case 4:s=255*u+.5,l=255*c+.5,n=255*a+.5;break;case 5:s=255*a+.5,l=255*c+.5,n=255*o+.5}}return 4278190080|s<<16|l<<8|n<<0}static toFixedHSV(e){let t=[];for(let a in e)t.push(32767*e[a]|0);return t}constructor(e,t,a){this.range=t,this.offsets=a,this.hsv=i.RGBtoHSB(e>>16&255,e>>8&255,255&e),this.fhsv=i.toFixedHSV(this.hsv)}}let c=e=>{let{icon:t,colorizations:a}=e,[l,n]=r.useState("".concat(t)),[c,o]=r.useState(!1);return(0,s.jsx)("img",{src:l,alt:t,className:"h-auto w-full transition-opacity ".concat(c?"opacity-100":"opacity-0"),crossOrigin:"anonymous",onLoad:e=>{if(!a||!l.endsWith(".png")){o(!0);return}let t=new Image;t.src=e.target.src,t.crossOrigin="anonymous",t.onload=()=>{let e=document.createElement("canvas"),s=e.getContext("2d");if(!s)return;e.width=t.width,e.height=t.height,s.drawImage(t,0,0);let l=s.getImageData(0,0,e.width,e.height),r=l.data,c=[];for(let e in a){let t=a[e];t&&c.push(new i(t.color,t.range,t.offsets))}for(let e=0;e<r.length;e+=4){let t=r[e],a=r[e+1],s=r[e+2],l=i.RGBtoHSB(t,a,s),n=i.toFixedHSV(l);for(let t=0;t<c.length;t++){let a=c[t];if(a&&a.matches(l,n)){let t=a.recolorColor(l);r[e]=t>>16&255,r[e+1]=t>>8&255,r[e+2]=255&t;break}}}s.putImageData(l,0,0),n(e.toDataURL()),o(!0)}}})};var o=a(9352);let u=e=>{let{star:t}=e;return t<=0?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 mt-[2px] flex items-center justify-center text-sm font-bold",children:t}),(0,s.jsx)(o.Kz,{className:"h-7 w-7 text-yellow-500"})]})};var d={ItemGroup:[{key:"ACCESSORY",value:"Accessory"},{key:"ARMOR",value:"Armor"},{key:"ARTIFACT",value:"Artifact"},{key:"BOMB",value:"Bomb"},{key:"CAPSULE",value:"Capsule"},{key:"COSTUME_ARMOR",value:"Costume Armor"},{key:"COSTUME_HELMET",value:"Costume Helmet"},{key:"COSTUME_SHIELD",value:"Costume Shield"},{key:"EQUIPPABLE",value:"Equippable"},{key:"FURNISHING",value:"Furnishing"},{key:"GUILD_UPGRADES",value:"Guild Upgrades"},{key:"HANDGUN",value:"Handgun"},{key:"HELMET",value:"Helmet"},{key:"ITEM",value:"Item"},{key:"KEY",value:"Key"},{key:"MATERIAL",value:"Material"},{key:"MINERAL",value:"Mineral"},{key:"RARITY",value:"Rarity"},{key:"RECIPE",value:"Recipe"},{key:"SHIELD",value:"Shield"},{key:"SPRITE_GEAR",value:"Sprite Gear"},{key:"SWORD",value:"Sword"},{key:"TICKET",value:"Ticket"},{key:"TOKEN",value:"Token"},{key:"TRINKET",value:"Trinket"},{key:"USABLE",value:"Usable"},{key:"VIAL",value:"Vial"}],ItemLocation:[{key:"AURA",value:"Aura"},{key:"ARMOR_BACK",value:"Armor Back"},{key:"ARMOR_ANKLE",value:"Armor Ankle"},{key:"ARMOR_REAR",value:"Armor Rear"},{key:"ARMOR_FRONT",value:"Armor Front"},{key:"HELM_FRONT",value:"Helm Front"},{key:"HELM_BACK",value:"Helm Back"},{key:"HELM_SIDE",value:"Helm Side"},{key:"HELM_TOP",value:"Helm Top"}],BidStatus:[{key:"NO_BID",value:"No Bid"},{key:"BID",value:"Bids"},{key:"BUY_NOW",value:"Buy Now"}],VariantName:[{key:"ATTACK_SPEED_INCREASED",value:"Attack Speed Increased"},{key:"CHARGE_TIME_REDUCTION",value:"Charge Time Reduction"},{key:"DAMAGE_BONUS_VS_CONSTRUCT",value:"Damage Bonus vs Construct"},{key:"DAMAGE_BONUS_VS_GREMLIN",value:"Damage Bonus vs Gremlin"},{key:"DAMAGE_BONUS_VS_FIEND",value:"Damage Bonus vs Fiend"},{key:"DAMAGE_BONUS_VS_BEAST",value:"Damage Bonus vs Beast"},{key:"DAMAGE_BONUS_VS_UNDEAD",value:"Damage Bonus vs Undead"},{key:"DAMAGE_BONUS_VS_SLIME",value:"Damage Bonus vs Slime"},{key:"INCREASED_NORMAL_DEFENSE",value:"Increased Normal Defense"},{key:"INCREASED_PIERCING_DEFENSE",value:"Increased Piercing Defense"},{key:"INCREASED_ELEMENTAL_DEFENSE",value:"Increased Elemental Defense"},{key:"INCREASED_SHADOW_DEFENSE",value:"Increased Shadow Defense"},{key:"INCREASED_STUN_RESISTANCE",value:"Increased Stun Resistance"},{key:"INCREASED_FREEZE_RESISTANCE",value:"Increased Freeze Resistance"},{key:"INCREASED_POISON_RESISTANCE",value:"Increased Poison Resistance"},{key:"INCREASED_FIRE_RESISTANCE",value:"Increased Fire Resistance"},{key:"INCREASED_SHOCK_RESISTANCE",value:"Increased Shock Resistance"},{key:"INCREASED_CURSE_RESISTANCE",value:"Increased Curse Resistance"},{key:"INCREASED_SLEEP_RESISTANCE",value:"Increased Sleep Resistance"}],VariantValue:[{key:"LOW",value:"Low"},{key:"MEDIUM",value:"Medium"},{key:"HIGH",value:"High"},{key:"VERY_HIGH",value:"Very High"},{key:"ULTRA",value:"Ultra"},{key:"MAXIMUM",value:"Maximum!"}],TimeLeft:[{key:"VERY_SHORT",value:"Very Short"},{key:"SHORT",value:"Short"},{key:"MEDIUM",value:"Medium"},{key:"LONG",value:"Long"},{key:"VERY_LONG",value:"Very Long"},{key:"ENDED",value:"Ended"}]};let m=e=>{var t;let{timeLeftString:a,endDateTimeUnix:l}=e,n=function(e){let t=e-new Date().getTime();if(t<=0)return"0m";let a=Math.floor(t/864e5);t-=864e5*a;let s=Math.floor(t/36e5);t-=36e5*s;let l=Math.floor(t/6e4),n="".concat(a,"d").concat(s,"h").concat(l,"m");return n.startsWith("0d")&&(n=n.replace("0d","")),n.startsWith("0h")&&(n=n.replace("0h","")),n}(l);return(0,s.jsxs)("div",{className:"flex ".concat("VERY_SHORT"!==a?"flex-col":"flex-row items-center"," text-xs text-white"),children:[(0,s.jsx)("span",{children:null===(t=d.TimeLeft.find(e=>e.key===a))||void 0===t?void 0:t.value}),"VERY_SHORT"!==a?(0,s.jsxs)("span",{children:["~",n," left"]}):(0,s.jsx)("img",{src:"ui/icon/alert.png",width:12,height:12,className:"mx-1",alt:"cr."})]})},h=e=>{let{variants:t}=e;return t&&0!==t.length?(0,s.jsx)("div",{className:"my-2 text-xs italic text-yellow-500",children:t.map(e=>{var t,a;return(0,s.jsxs)("div",{children:[null===(t=d.VariantName.find(t=>t.key===e.name))||void 0===t?void 0:t.value,":"," ",null===(a=d.VariantValue.find(t=>t.key===e.value))||void 0===a?void 0:a.value]},"".concat(e.name,"-").concat(e.value))})}):(0,s.jsx)(s.Fragment,{})},x=e=>{var t;let{price:a,status:l}=e;return(0,s.jsxs)("div",{className:"flex items-center whitespace-nowrap text-xs text-white",children:[(0,s.jsx)("img",{src:"ui/icon/crown_32.png",width:12,height:12,className:"mr-1",alt:"cr."}),Intl.NumberFormat().format(a),(0,s.jsx)("span",{className:"ml-1 rounded-md bg-slate-800/30 px-1 text-[0.6rem]",children:null===(t=d.BidStatus.find(e=>e.key===l))||void 0===t?void 0:t.value})]})},v=e=>{let{lastDateUpdatedUnix:t}=e,a=new Date,l=new Date(t),n=Math.floor((a.getTime()-l.getTime())/1e3),r="".concat(Math.floor(n/3600),"h").concat(Math.floor(n%3600/60),"m").replace("0h","");return(0,s.jsxs)("div",{className:"text-xs font-light italic text-white",children:["Last activity"," ","0m"!=r?"".concat(r," ago"):"now"]})},f=e=>{let{count:t}=e;return t<=1?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"relative mr-2 rounded-md bg-white/90 px-1 text-center text-xs font-medium text-slate-800",children:["x",t]})},E=e=>{let{auction:t}=e;return(0,s.jsxs)("div",{className:"relative rounded-md ".concat(t.featured?"bg-slate-500 ring-1 ring-yellow-500":"bg-slate-700"," p-2"),children:[t.featured?(0,s.jsx)("div",{className:"absolute -top-2 left-0 rounded-md rounded-bl-none bg-slate-500 px-1 text-center text-[0.65rem] text-slate-200 ring-1 ring-yellow-500",children:"Featured Auction"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{className:"absolute -bottom-2 -left-2 shadow-xl",children:(0,s.jsx)(u,{star:t.item.star})}),(0,s.jsxs)("div",{className:"flex w-full flex-row",children:[(0,s.jsx)("div",{className:"relative z-10 w-10 shrink-0 self-center",children:(0,s.jsx)(c,{icon:t.item.icon,colorizations:t.item.colorization})}),(0,s.jsxs)("div",{className:"z-10 flex flex-col px-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-xs font-medium text-white",children:[(0,s.jsx)(f,{count:t.count}),t.item.name]}),(0,s.jsx)("div",{className:"font-light italic text-white",children:(0,s.jsx)(m,{timeLeftString:t.timeLeft,endDateTimeUnix:t.estimatedEndTime})})]}),(0,s.jsxs)("div",{className:"ml-auto flex flex-col items-end",children:[(0,s.jsx)(x,{price:t.bidPrice,status:t.bidStatus}),t.buyPrice>0&&(0,s.jsx)(x,{price:t.buyPrice,status:"BUY_NOW"})]})]}),(0,s.jsx)(h,{variants:t.variant}),(0,s.jsx)("div",{className:"absolute right-0 bottom-0 px-1 opacity-50",children:(0,s.jsx)(v,{lastDateUpdatedUnix:t.updatedTime})})]})},y=()=>{let[e,t]=r.useState("-"),[a,l]=r.useState("-");return r.useEffect(()=>{let e=window.location.protocol.startsWith("https")?"https://api.ball.one":"http://47.99.139.229:10000";fetch("".concat(e,"/exchanges/latest")).then(e=>e.json()).then(e=>{var a,s;e.buyOffers.length>0&&t(null===(a=e.buyOffers[0])||void 0===a?void 0:a.price),e.sellOffers.length>0&&l(null===(s=e.sellOffers[0])||void 0===s?void 0:s.price)}).catch(e=>console.log(e))},[]),(0,s.jsxs)("div",{className:"text-xs text-slate-200",children:[(0,s.jsx)("div",{className:"mt-2 text-sm",children:"Energy Prices:"}),(0,s.jsxs)("div",{className:"flex items-center",children:["Bid:"," ",(0,s.jsx)("img",{src:"ui/icon/crown_32.png",width:12,height:12,className:"mx-1",alt:"cr."}),(0,s.jsx)("span",{className:"font-bold",children:e}),"\xa0Ask:",(0,s.jsx)("img",{src:"ui/icon/crown_32.png",width:12,height:12,className:"mx-1",alt:"cr."}),(0,s.jsx)("span",{className:"font-bold",children:a})]})]})},N=()=>(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex items-center text-xl font-bold text-slate-200",children:[(0,s.jsx)("img",{src:"ui/icon/inventory/guild/room/icon_room-auction.png",width:24,height:24,alt:"auction house",className:"mr-2"}),"Auction House"]}),(0,s.jsx)(y,{})]});var g=a(9274),S=a(3854);let p=e=>{let{total:t,page:a,pageSize:l,setPage:n,setAuctions:r,loading:i}=e,c=(e,t)=>{!i&&(n(e),t&&r([]))};return(0,s.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,s.jsx)(j,{onClick:()=>c(a-1,!0),children:(0,s.jsx)(g.DEl,{})}),(0,s.jsx)("input",{className:"h-8 w-8 rounded-md bg-white/10 text-center text-sm text-slate-200",value:a+1,onFocus:e=>e.currentTarget.select(),onInput:e=>{let s=parseInt(e.currentTarget.value);if(!s||s>Math.ceil(t/l)||s<1){c(a,!1);return}c(parseInt(e.currentTarget.value)-1,!0)}}),(0,s.jsx)(j,{onClick:()=>c(a+1,!0),children:(0,s.jsx)(g.MOd,{})})]})},k=e=>{let{total:t,page:a,pageSize:l,setPage:n,setAuctions:r,loading:i}=e;return(0,s.jsxs)("div",{className:"px-5",children:[" ",(0,s.jsxs)("div",{className:"text-xs text-slate-200",children:["Page ",(0,s.jsx)("span",{className:"font-bold",children:a+1})," out of"," ",(0,s.jsx)("span",{className:"font-bold",children:Math.ceil(t/l)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(p,{total:t,page:a,pageSize:l,setPage:n,setAuctions:r,loading:i}),(0,s.jsx)(j,{onClick:()=>{console.log("yo")},children:(0,s.jsx)(S.Iit,{})})]})]})},j=e=>{let{onClick:t,children:a}=e;return(0,s.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-white/10 text-sm text-slate-200",onClick:t,children:a})},R=()=>{let[e,t]=r.useState([]),[a,l]=r.useState(0),[n,i]=r.useState(20),[c,o]=r.useState(0),[u,d]=r.useState(!1),[m,h]=r.useState(""),x=()=>{let e=window.location.protocol.startsWith("https")?"https://api.ball.one":"http://47.99.139.229:10000";d(!0),fetch("".concat(e,"/auctions?timeLeft=VERY_SHORT,SHORT,MEDIUM,LONG,VERY_LONG&sort=estimatedEndTime:asc&page=").concat(a,"&size=").concat(n,"&name=").concat(m)).then(e=>e.json()).then(e=>{e.list&&(t(e.list),l(e.page),i(e.size),o(e.total))}).finally(()=>d(!1)).catch(e=>console.log(e))};return r.useEffect(()=>{x()},[a,n,m]),(0,s.jsx)("div",{className:"flex min-h-screen flex-col overflow-x-hidden bg-gray-800",children:(0,s.jsxs)("div",{className:"relative w-screen",children:[(0,s.jsxs)("div",{className:"xl:fixed",children:[(0,s.jsx)(N,{}),(0,s.jsx)(k,{total:c,page:a,pageSize:n,setPage:l,setAuctions:t,loading:u}),(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)("input",{type:"text",placeholder:"Search",className:"font-bold",value:m,onChange:e=>{h(e.target.value),x()}})})]}),u?(0,s.jsx)("div",{className:"flex h-full min-h-[50vh] flex-row items-center justify-center",children:(0,s.jsx)("div",{className:"h-32 w-32 animate-spin rounded-full border-b-2 border-white"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mx-auto flex max-w-[750px] flex-col gap-y-5 p-5",children:e.map(e=>(0,s.jsx)(E,{auction:e},e.id))}),(0,s.jsx)("div",{className:"mb-6 flex items-center justify-center",children:(0,s.jsx)(p,{total:c,page:a,pageSize:n,setPage:l,setAuctions:t,loading:u})})]})]})})},A=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"Auction House"}),(0,s.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,s.jsx)("link",{rel:"icon",href:"ui/icon/app.ico"})]}),(0,s.jsx)(R,{})]});var _=A},9008:function(e,t,a){e.exports=a(2636)},8357:function(e,t,a){"use strict";a.d(t,{w_:function(){return c}});var s=a(7294),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(l),r=function(){return(r=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},i=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)0>t.indexOf(s[l])&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(a[s[l]]=e[s[l]]);return a};function c(e){return function(t){return s.createElement(o,r({attr:r({},e.attr)},t),function e(t){return t&&t.map(function(t,a){return s.createElement(t.tag,r({key:a},t.attr),e(t.child))})}(e.child))}}function o(e){var t=function(t){var a,l=e.attr,n=e.size,c=e.title,o=i(e,["attr","size","title"]),u=n||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),s.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,o,{className:a,style:r(r({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==n?s.createElement(n.Consumer,null,function(e){return t(e)}):t(l)}}},function(e){e.O(0,[937,556,827,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);